#!/usr/bin/env python3

import subprocess
import sys
import socket
import os
import uuid
import shutil

pwd = os.getcwd()
target = sys.argv[1]

def percorrer_arquivo_e_salvar(arquivo):
    resultado = ""
    with open(arquivo, 'r') as f:
        for linha in f:
            resultado += linha.strip() + "\n"
    return resultado

nome_arquivo = ''+pwd+'/dominios.txt'
resultado_for = percorrer_arquivo_e_salvar(nome_arquivo)

def parallel():
    os.system('rm -rf '+pwd+'/'+target+'/temp/subdomain_parallel.log')
    for dominio in resultado_for.splitlines():
     dominio_sem_quebra = dominio.strip()
     with open (''+pwd+'/'+target+'/temp/subdomain_parallel.log','a') as file:
           file.write('python3 '+pwd+'/subdomains_amass.py '+target+' '+dominio_sem_quebra+' \n')
    print(" [+] PROCESSANDO SUBDOMAIN [+] \n")
    os.system('cat '+pwd+'/'+target+'/temp/subdomain_parallel.log | parallel -u')
    
def main():
   percorrer_arquivo_e_salvar
   parallel() 
if __name__ == '__main__':
    main()
   
